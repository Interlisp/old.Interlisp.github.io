<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>19-SPY</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part21.htm">&lt; Previous</a><span> | </span><a href="../Medley-Primer.html">Contents</a><span> | </span><a href="part23.htm">Next &gt;</a></p><h1 style="padding-top: 3pt;padding-left: 35pt;text-indent: 0pt;text-align: left;"><a name="bookmark21">19. WHERE DOES ALL THE TIME GO? SPY</a></h1><p style="padding-left: 35pt;text-indent: 0pt;line-height: 6pt;text-align: left;"><span><img width="640" height="8" alt="image" src="Image_134.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s3" style="padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">SPY <span class="p">is an Lisp library package that shows you where you spend your time when you run your system. It is easy to learn, and very useful when trying to make programs run</span></p><p style="padding-left: 107pt;text-indent: 0pt;line-height: 11pt;text-align: left;">faster.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-left: 35pt;text-indent: 0pt;text-align: left;">How to Use Spy with the SPY Window                                                           </h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">The function <span class="s3">SPY.BUTTON </span>brings up a small window which you will be prompted to position. Using the mouse buttons in this window controls the action of the <span class="s3">SPY</span></p><p style="padding-bottom: 3pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">program. When you are not using <span class="s3">SPY</span>, the window appears as in Figure 19.1.</p><p style="padding-left: 276pt;text-indent: 0pt;text-align: left;"><span><img width="85" height="89" alt="image" src="Image_135.gif"/></span></p><p style="padding-top: 9pt;padding-left: 111pt;text-indent: 0pt;text-align: center;">Figure 19.1. <span class="s3">SPY </span>Window When <span class="s3">SPY </span>is Not Being Used</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">To use <span class="s3">SPY</span>, click either the left or middle mouse button with the mouse cursor in the</p><p class="s3" style="padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">SPY <span class="p">window. The window will appear as in Figure 19.2, and means that </span>SPY <span class="p">is accumulating data about your program.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 278pt;text-indent: 0pt;text-align: left;"><span><img width="85" height="89" alt="image" src="Image_136.gif"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 111pt;text-indent: 0pt;text-align: center;">Figure 19.2. <span class="s3">SPY </span>Window When <span class="s3">SPY </span>is Being Used</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">To turn off <span class="s3">SPY </span>after the program has run, again click a mouse button in the <span class="s3">SPY</span></p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">window. The eye closes, and you are asked to position another window. This window contains <span class="s3">SPY</span>’s results. An example of the resulting window is shown in Figure 19.3.</p><p class="s7" style="padding-top: 3pt;padding-left: 35pt;text-indent: 0pt;text-align: left;"> 19. WHERE DOES ALL THE TIME GO? SPY                                                                                                          </p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 108pt;text-indent: 0pt;text-align: left;"><span><img width="477" height="204" alt="image" src="Image_137.gif"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 195pt;text-indent: 0pt;text-align: left;">Figure 19.3. Window Produced After Running <span class="s3">SPY</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 107pt;text-indent: 0pt;text-align: justify;">This window is scrollable horizontally and vertically. This is useful, since the whole tree does not fit in the window. If a part that you want to see is not shown, you can scroll the window to show the part you want to see.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-left: 35pt;text-indent: 0pt;text-align: left;">How to Use SPY from the Lisp Top Level                                                      </h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s3" style="padding-top: 4pt;padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">SPY <span class="p">can also be run while a specific function or system is being used. To do this, type the function </span>WITH.SPY<span class="p">:</span></p><p class="s3" style="padding-top: 7pt;padding-left: 143pt;text-indent: 0pt;text-align: left;">(WITH.SPY <span class="s4">form</span>)</p><p style="padding-top: 7pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">The expression used for form should be the call to begin running the function or system that SPY is to watch. If you watch the <span class="s3">SPY </span>window, the eye will blink! To see your</p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">results, run the function <span class="s3">SPY.TREE</span>. To do this, type:</p><p class="s3" style="padding-top: 7pt;padding-left: 143pt;text-indent: 0pt;text-align: left;">(SPY.TREE)</p><p style="padding-top: 7pt;padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">The results of the last running of <span class="s3">SPY </span>will be displayed. If you do this, and <span class="s3">SPY.TREE </span>returns (no <span class="s3">SPY </span>samples have been gathered), your function ran too fast for <span class="s3">SPY </span>to follow.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-left: 35pt;text-indent: 0pt;text-align: left;">Interpreting SPY’s Results                                                                              </h2><p style="padding-top: 9pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">Each node in the tree is a box that contains, first, the percentage of time spent running that particular function, and second, the function name. There are two modes that can be used to display this tree.</p><p style="padding-top: 7pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">The default mode is cumulative. In this mode, each percentage is the amount of time</p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">that function spent on top of the stack, plus the amount of time spent by the functions it calls. The second mode is individual. To change the mode to individual, point to the title bar of the window, and press the middle mouse button. Choose <span class="s3">Individual </span>from the menu that appears. In this mode, the percentage shown is the amount of time the</p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">function spent on the top of the stack.</p><p style="padding-top: 7pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">To look at a single branch of the tree, point with the mouse cursor at one of the nodes of the tree, and press the right mouse button. From the menu that appears, choose the</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 35pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="665" height="1" alt="image" src="Image_138.png"/></span></p><p class="s8" style="padding-left: 35pt;text-indent: 0pt;text-align: left;">19-2 <span class="s6">Medley for the Novice, Release 2.0</span></p><p class="s7" style="padding-top: 3pt;padding-left: 35pt;text-indent: 0pt;text-align: left;">                                                                                                           19. WHERE DOES ALL THE TIME GO? SPY</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">option <span class="s3">SubTree</span>. Another <span class="s3">SPY </span>window will appear, with just this branch of the tree in it.</p><p style="padding-top: 6pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">Another way to focu s within the tree is to remove branches from the tree. To do this, point to the node at the top of the branch you would like to delete. Press the middle mouse button, and choose <span class="s3">Delete </span>from the menu that appears.</p><p style="padding-top: 7pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">There are also different amounts of &quot;merging&quot; of functions that can be done in the</p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">window. A function can be called by another function more than once. The amount of merging determines where the subfunction, and the functions that it calls, appear in the tree, and how often. (For a detailed explanation of merging, see the <i>Lisp Library Packages Manual</i>.)</p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part21.htm">&lt; Previous</a><span> | </span><a href="../Medley-Primer.html">Contents</a><span> | </span><a href="part23.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
